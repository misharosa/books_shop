(this.webpackJsonpbooks_shop=this.webpackJsonpbooks_shop||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(24),a=n.n(r),i=n(4),o=(n(29),n(2)),l=(n(30),n(0)),u=function(){return Object(l.jsx)("div",{className:"footer",children:Object(l.jsx)("h3",{className:"footer__title",children:"\u0412\u0441\u0442\u0438\u0433\u043d\u0438 \u043f\u0440\u0438\u0434\u0431\u0430\u0442\u0438 \u043a\u043d\u0438\u0436\u043a\u0443 \u0434\u043e 25 \u0447\u0435\u0440\u0432\u043d\u044f!"})})},d=(n(32),n(6)),j=function(){return Object(l.jsx)("div",{className:"header-container",children:Object(l.jsxs)("ul",{className:"header__list",children:[Object(l.jsx)(d.b,{to:"/books_shop",className:"header__item",children:"Home"}),Object(l.jsx)(d.b,{to:"/books_shop",className:"header__item",children:"List"}),Object(l.jsx)(d.b,{to:"/books_shop",className:"header__item",children:"Other"}),Object(l.jsx)(d.b,{to:"/books_shop",className:"header__item",children:"Exit"})]})})},b=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{}),Object(l.jsx)(o.a,{}),Object(l.jsx)(u,{})]})},m=(n(33),function(){return Object(l.jsxs)("div",{className:"store",children:[Object(l.jsx)("img",{className:"store__img",src:"https://previews.123rf.com/images/pauldesign/pauldesign1601/pauldesign160100033/51548041-welcome-we-are-open-a-welcome-sign-for-cafes-or-shop-visitors-on-blackboard-background-with-chalk-ha.jpg",alt:"shop"}),Object(l.jsxs)("div",{className:"store__list",children:[Object(l.jsx)(d.b,{className:"store__item",to:"/books_shop/books",children:"Books"}),Object(l.jsx)(d.b,{className:"store__item",to:"/books_shop/magazines",children:"Magazines"})]})]})}),h=n(9),p=n(8),f=n(7),O=n.n(f),v=n(12),x=n.n(v),_=function(){var e=Object(p.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()("http://localhost:3001/".concat(t));case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(O.a.mark((function e(t,n){var c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.patch("http://localhost:3001/books/".concat(n.id),n);case 3:return c=e.sent,s=c.data,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("http://localhost:3001/books/".concat(t));case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=(n(53),n(54),function(e){var t=e.active,n=e.setActive,c=e.children;return Object(l.jsx)("div",{className:t?"modal active":"modal",onClick:function(){return n(!1)},children:Object(l.jsx)("div",{className:t?"modal__content active":"modal__content",onClick:function(e){return e.stopPropagation()},children:c})})}),E=function(e){var t=e.item,n=e.handleDelete,c=e.modalActive,s=e.setModalActive,r=e.handleEdit,a=e.nameEdit,i=e.setNameEdit,o=e.priceEdit,u=e.setPriceEdit,d=e.editItem,j=e.handleFind;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"good",children:[Object(l.jsx)("img",{className:"goods_img",src:t.poster,alt:"book_img"}),Object(l.jsx)("p",{className:"goods_name",children:t.name}),Object(l.jsxs)("div",{className:"goods_price",children:[t.price," \u0433\u0440\u043d."]})]}),Object(l.jsxs)("div",{className:"good__item-buttons",children:[Object(l.jsx)("button",{className:"good__item-button open-modal",onClick:function(){return j(t.id)},children:"Edit"}),Object(l.jsx)("button",{className:"good__item-button",onClick:function(){return n(t.id)},children:"Delete"})]})]}),Object(l.jsx)(k,{active:c,setActive:s,children:Object(l.jsxs)("form",{onSubmit:function(e){return r(e,d)},className:"form",children:[Object(l.jsxs)("label",{children:["Name:",Object(l.jsx)("textarea",{className:"form__item",value:a,onChange:function(e){return i(e.target.value)}})]}),Object(l.jsxs)("label",{children:["Price:",Object(l.jsx)("input",{className:"form__item",value:o,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsx)("button",{type:"submit",className:"form__button",children:"Submit"})]})})]})},w=(n(55),n(56),function(e){var t=e.setFilterValue,n=e.filterValue;return Object(l.jsxs)("label",{htmlFor:"",children:["\u0428\u0443\u043a\u0430\u0442\u0438:",Object(l.jsx)("input",{className:"input__search",type:"search",value:n,onChange:function(e){return t(e.target.value)}})]})}),F=function(e){var t=e.items,n=e.handleDelete,c=e.modalActive,s=e.setModalActive,r=e.handleEdit,a=e.nameEdit,i=e.setNameEdit,o=e.priceEdit,u=e.setPriceEdit,d=e.editItem,j=e.setEditItem,b=e.handleFind,m=e.filterValue,h=e.setFilterValue;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(w,{setFilterValue:h,filterValue:m}),t.length>0&&Object(l.jsx)("div",{className:"goods",children:t.map((function(e){return Object(l.jsx)("div",{className:"goods__item",children:Object(l.jsx)(E,{items:t,nameEdit:a,setNameEdit:i,priceEdit:o,setPriceEdit:u,item:e,handleDelete:n,modalActive:c,setModalActive:s,handleEdit:r,editItem:d,setEditItem:j,handleFind:b})},e.id)}))})]})},A=function(e){var t=e.items,n=e.setItems,s=Object(o.h)().name,r=Object(c.useState)({}),a=Object(i.a)(r,2),u=a[0],d=a[1],j=Object(c.useState)(""),b=Object(i.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)(!1),x=Object(i.a)(v,2),k=x[0],E=x[1],w=Object(c.useState)(""),A=Object(i.a)(w,2),I=A[0],C=A[1],S=Object(c.useState)(""),V=Object(i.a)(S,2),y=V[0],M=V[1];Object(c.useEffect)((function(){if(0===t.length){var e=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){return n(e)}))}}),[s,n,t.length]);var D=Object(c.useMemo)((function(){return t.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())}))}),[t,m]);return Object(l.jsx)("div",{children:Object(l.jsx)(F,{setFilterValue:f,filterValue:m,setNameEdit:C,setPriceEdit:M,nameEdit:I,priceEdit:y,handleEdit:function(e){e.preventDefault(),E(!1);var c=t.map((function(e){if(e.id===u.id){var t=Object(h.a)(Object(h.a)({},e),{},{name:I,price:y});return g("books",t).then((function(e){return console.log(e)})),t}return e}));n(c)},handleDelete:function(e){N(e).then((function(e){return e}));var c=t.filter((function(t){return t.id!==e}));n(c)},handleFind:function(e){var n=t.find((function(t){return t.id===e}));C(n.name),M(n.price),E(!0),d(Object(h.a)(Object(h.a)({},n),{},{name:n.name,price:n.price}))},items:D,modalActive:k,setModalActive:E,editItem:u,setEditItem:d})})},I=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(o.d,{children:Object(l.jsxs)(o.b,{element:Object(l.jsx)(b,{}),children:[Object(l.jsx)(o.b,{path:"/books_shop",element:Object(l.jsx)(m,{})}),Object(l.jsx)(o.b,{path:"/books_shop/:name",element:Object(l.jsx)(A,{items:n,setItems:s})})]})})})};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(d.a,{children:Object(l.jsx)(I,{})})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.bf4819b5.chunk.js.map